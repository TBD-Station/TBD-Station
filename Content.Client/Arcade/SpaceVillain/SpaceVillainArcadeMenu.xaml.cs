using Content.Client.UserInterface.Controls;
using Robust.Client.AutoGenerated;
using Robust.Client.UserInterface.XAML;

namespace Content.Client.Arcade.SpaceVillain;

[GenerateTypedNameReferences]
public sealed partial class SpaceVillainArcadeMenu : FancyWindow
{
    public Action? OnAttack;
    public Action? OnHeal;
    public Action? OnRecharge;
    public Action? OnNewGame;

    public SpaceVillainArcadeMenu()
    {
        RobustXamlLoader.Load(this);

        AttackButton.OnPressed += _ => OnAttack?.Invoke();
        HealButton.OnPressed += _ => OnHeal?.Invoke();
        RechargeButton.OnPressed += _ => OnRecharge?.Invoke();
        NewGameButton.OnPressed += _ => OnNewGame?.Invoke();
    }

    public void UpdateData(byte playerHP, byte playerMP, byte villainHP, byte villainMP)
    {
        var unactive = playerHP == 0 && playerMP == 0 && villainHP == 0 && villainMP == 0;

        AttackButton.Disabled = unactive;
        HealButton.Disabled = unactive;
        RechargeButton.Disabled = unactive;

        PlayerHPLabel.Text = $"HP: {playerHP}";
        PlayerMPLabel.Text = $"MP: {playerMP}";

        VillainHPLabel.Text = $"HP: {villainHP}";
        VillainMPLabel.Text = $"MP: {villainMP}";
    }
}
